if(!window.QUESTIONS_Loaded){QUTILS={};QUTILS.addInvitation=function(b){var d,c,a;d=$(b);c=function(){var e=$(this);if(e.val()==e.attr("inv")){e.val("")}e.removeClass("invitation")};a=function(){var e=$(this);if(!e.val()){e.val(e.attr("inv"));e.addClass("invitation")}};d.unbind("focus.invitation").on("focus.invitation",c);d.unbind("blur.invitation").on("blur.invitation",a)};QUESTIONS_QuestionColletction={};QUESTIONS_AnswerListCollection={};QUESTIONS_RelationCollection={};QUESTIONS_QuestionList=function(c,b){window.QUESTIONS_ListObject=this;var a=this;this.node=document.getElementById(c);this.$list=null;this.data=b;this.rsp=null;this.initQuestionList=function(d){$(d).each(function(){var e=$(this);a.initQuestion(e.attr("rel"),e)})};this.initQuestion=function(d){};this.setResponder=function(d){this.rsp=d};this.ajax=function(e,f){var d=function(){this.ajaxSuccess.apply(this,arguments);if(f){f.apply(this,arguments)}};this.startAjax();$.ajax({type:"POST",url:this.rsp,data:{data:JSON.stringify(this.data),query:JSON.stringify(e)},context:this,success:d,dataType:"json",complete:this.endAjax})};this.startAjax=function(){};this.endAjax=function(){};this.ajaxSuccess=function(e){if(e.data){this.data=e.data}if(e.error){OW.error(e.error)}if(e.warning){OW.warning(e.warning)}if(e.info){OW.info(e.info)}if(e.markup){if(e.markup.html){var d=$(e.markup.html);if(e.markup.position==="append"){d.appendTo(this.$list)}if(e.markup.position==="prepend"){d.prependTo(this.$list)}if(e.markup.position==="replace"){this.$list.empty().append(d)}this.initQuestionList(d)}if(e.markup.script){OW.addScript(e.markup.script)}this.$(".ql_delimiter").show();this.$(".ql_delimiter:last").hide()}if(this.data.viewMore===false){this.$viewMoreC.hide()}if(this.data.viewMore===true){this.$viewMoreC.show()}if(e.loadMore&&this.data.viewMore){this.loadMore(e.loadMore)}};this.$=function(d){return $(d,this.node)};this.loadMore=function(e){if(this.data.displayedCount>=this.data.totalCount){return}var d=this.$viewMoreC.find("input.ql_view_more");OW.inProgressNode(d);a.ajax({command:"more",count:e},function(){OW.activateNode(d)})};this.reload=function(d){d=d||"latest";var e=$(".ql-menu .active span");e.addClass("q_ic_preloader");a.ajax({command:"order",order:d},function(){e.removeClass("q_ic_preloader")})};this.$list=this.$(".ql-items");this.$orderSelect=$(".ql-sort-wrap");this.$viewMoreC=this.$(".ql_view_more_c");this.initQuestionList(this.$list);this.$viewMoreC.find("input.ql_view_more").click(function(){a.loadMore()});this.$orderSelect.find(".ql-sort-item").click(function(){var d=$(this);if(d.hasClass("ql-sort-item-checked")){return false}a.$orderSelect.find(".ql-sort-item").removeClass("ql-sort-item-checked");a.reload(d.attr("qorder"));d.addClass("ql-sort-item-checked");$(".ql-sort-btn").text(d.find("span").text());return false})};QUESTIONS_Question=function(c,a){this.answerList=null;this.questionId=a;this.node=document.getElementById(c);OW.bindAutoClicks(this.node);var b=this;OW.bind("base.comments_list_init",function(d){if(d.entityType==="question"&&d.entityId==b.questionId){b.answerList.refreshStatus(this.totalCount,false,false);if(b.answerList.relation){b.answerList.relation.refreshStatus(this.totalCount,false,false)}}})};QUESTIONS_Question.prototype=new (function(){this.$=function(a){return $(a,this.node)};this.setAnswerList=function(a){this.answerList=a;this.answerList.setBehavior(QUESTIONS_InQuestionBehavior)};this.focusOnPostInput=function(){this.$(".q-comments textarea").focus()}})();QUESTIONS_InQuestionBehavior={initViewMore:function(){var a=this;this.$(".qa-view-more").click(function(){a.loadMore();return false})}};QUESTIONS_UserList=function(b,e,d,a,c){this.users=e;this.userId=a;this.maxCount=3;this.node=b;this.voteCount=d;this.optionId=c;this.init()};QUESTIONS_UserList.prototype={$:function(a){return $(a,this.node)},init:function(){var a=this,b=false;this.initTooltip();this.$(".qaa-view-more-btn").click(function(){if(b){return false}if(QUESTIONS_UserList.floatBox){QUESTIONS_UserList.floatBox.close()}QUESTIONS_UserList.floatBox=OW.ajaxFloatBox("QUESTIONS_CMP_UserList",[a.optionId,a.getUsers()],{width:450,iconClass:"ow_ic_user",title:OW.getLanguageText("questions","users_fb_title")});if(QUESTIONS_UserList.floatBox.$preloader){QUESTIONS_UserList.floatBox.$preloader.addClass("q-floatbox-preloader")}b=true;QUESTIONS_UserList.floatBox.bind("close",function(){QUESTIONS_UserList.floatBox=false;b=false})})},getUsers:function(){var b=[],a;a=this.$(".qa-users-c .qa-user");for(var c=0;c<this.maxCount;c++){b.push($(a[c]).attr("rel"))}return b},add:function(){this.$(".user-"+this.userId).prependTo(this.$(".qa-users-c"));this.voteCount++;this.changed()},remove:function(){this.$(".user-"+this.userId).appendTo(this.$(".qa-hidden-users-c"));this.voteCount--;this.changed()},changed:function(){if(this.hasViewMore()){this.$(".qaa-view-more-btn").show()}else{this.$(".qaa-view-more-btn").hide()}},hasViewMore:function(){return this.getOtherVoteCount()>0},getUserCount:function(){var a=this.$(".qa-users-c .qa-user").length;return a>this.maxCount?this.maxCount:a},getOtherVoteCount:function(){return this.voteCount-this.getUserCount()},initTooltip:function(){var a=this,b=this.$("*[title], *[q-title]");b.unbind();b.hover(function(){var c=a.hasViewMore();var e={side:"top"};if(c&&$(this).is(".qaa-view-more-btn img")){e.side="right";if(!$(this).data("owTip")){var d=$(this).attr("q-title");e.show=d.replace("[count]",a.getOtherVoteCount())}}if(!c&&a.$(".qa-users-c .qa-user:last .qa-user_avatar img").is(this)){e.side="right"}$(this).data("owTipStatus",false);OW.showTip($(this),e)},function(){OW.hideTip($(this))})}};QUESTIONS_AnswersProto=function(){this.init=function(e,b,d,c){var a=this;this.uniqId=e;if(!d.inPopupMode){QUESTIONS_RelationCollection[d.questionId]=this.uniqId}this.userId=d.userId;this.data=d;this.options={};this.activeCommands=0;this.questionFloatBox=false;this.totalAnswers=d.totalAnswers;this.node=document.getElementById(e);this.inProgress=false;this.fbMode=OW_FloatBox.version&&OW_FloatBox.version>1;this.refreshStatus(false,false,false);this.$(".questions-answer").each(function(){var f=$(this).attr("rel");a.options["opt_"+f]=a.bindOption(this,c)});$.each(b,function(g,h){var f=a.getOption(h.id);f.users=new QUESTIONS_UserList(f.node.find(".qa-users .qa-avatar"),h.users,h.voteCount,a.userId,h.id);f.checked=h.checked;f.newOption=false});this.$listFollows=$(".q-"+this.uniqId+"-status-follows");this.$listFollowsBtn=this.$listFollows.find(".newsfeed-feature-button-control");if(this.$listFollows.length){this.$listFollowsBtn.hover(function(){var f=a.$listFollowsBtn.is(".active")?OW.getLanguageText("questions","toolbar_unfollow_btn"):OW.getLanguageText("questions","toolbar_follow_btn");a.refreshFollowLabel();OW.showTip(a.$listFollows,{side:"right",show:f})},function(){OW.hideTip(a.$listFollows)})}};this.refreshFollowLabel=function(){var a=this.$listFollowsBtn.is(".active")?OW.getLanguageText("questions","toolbar_unfollow_btn"):OW.getLanguageText("questions","toolbar_follow_btn");if(this.$listFollows.data("owTip")){this.$listFollows.data("owTip").find(".ow_tip_box").html(a)}};this.followQuestion=function(){this.showUnfollow();this.ajax({command:"follow"})};this.unfollowQuestion=function(){this.showFollow();this.ajax({command:"unfollow"})};this.showFollow=function(){var a=this;$("#"+this.uniqId+"-follow").show();$("#"+this.uniqId+"-unfollow").hide();if(!this.$listFollows.length){return}this.$listFollowsBtn.removeClass("active").find(".newsfeed-feature-button").get(0).onclick=function(){a.followQuestion()};this.refreshFollowLabel()};this.showUnfollow=function(){var a=this;$("#"+this.uniqId+"-unfollow").show();$("#"+this.uniqId+"-follow").hide();if(!this.$listFollows.length){return}this.$listFollowsBtn.addClass("active").find(".newsfeed-feature-button").get(0).onclick=function(){a.unfollowQuestion()};this.refreshFollowLabel()};this.showFollowers=function(){QUESTIONS.showQuestionFollowers(this.data.questionId,this.data.userContext,[this.data.ownerId])};this.unvote=function(){var a=this;$("#"+this.uniqId+"-unvote").parent().hide();this.$(".qa-check input:checked").each(function(){this.checked=false;a.answer(this.value);a.calculate()})};this.showUnvote=function(){$("#"+this.uniqId+"-unvote").parent().show()};this.setRelation=function(a){this.relation=QUESTIONS_AnswerListCollection[a]};this.refresh=function(){this.ajax({command:"reload"})};this.redraw=function(a){$("#"+this.uniqId).replaceWith(a.markup);OW.addScript(a.script)};this.deleteQuestion=function(){if(this.relation){this.relation.deleteQuestion();return}if(this.questionFloatBox){this.questionFloatBox.close()}this.ajax({command:"deleteQuestion"});this.removeQuestionNode()};this.removeQuestionNode=function(){$(this.node).parents("li:eq(0)").remove()};this.refreshStatus=function(c,d,e){var b=this;var a=function(){var i=$(".q-"+b.uniqId+"-status-comments .newsfeed-feature-label"),h=$(".q-"+b.uniqId+"-status-votes .newsfeed-feature-label"),g=$(".q-"+b.uniqId+"-status-follows .newsfeed-feature-label");d=d===false?parseInt(h.text()):parseInt(d);c=c===false?parseInt(i.text()):parseInt(c);e=e===false?parseInt(g.text()):parseInt(e);h.text(d);i.text(c);g.text(e)};var f=function(){var g=$("#"+b.uniqId+"-status"),i=g.find(".q-status-votes"),h=g.find(".q-status-posts"),j=g.find(".q-status-follows"),l=g.find(".qsd-1"),k=g.find(".qsd-2");c=c===false?parseInt(h.find(".qs-number").text()):parseInt(c);d=d===false?parseInt(i.find(".qs-number").text()):parseInt(d);e=e===false?parseInt(j.find(".qs-number").text()):parseInt(e);l[c&&d?"show":"hide"]();k[c&&e||d&&e?"show":"hide"]();g.parents(".ql_control:eq(0)")[c||d||e?"show":"hide"]();g[c||d||e?"show":"hide"]();i[d?"show":"hide"]();h[c?"show":"hide"]();j[e?"show":"hide"]();h.find(".qs-number").text(c);i.find(".qs-number").text(d);j.find(".qs-number").text(e)};if(this.data.expandedView){f()}else{a()}};this.beforeRemove=function(){};this.afterRemove=function(b,a){if(!a){this.data.offset--}this.data.optionTotal--;this.data.displayedCount--;this.controlRemoveBtns()};this.startCommand=function(){this.activeCommands++};this.endCommand=function(){this.activeCommands--};this.isBusy=function(){return this.activeCommands>3};this.controlRemoveBtns=function(){};this.removeOption=function(d){var a=this,e,c,b=this.getOption(d);if(this.beforeRemove(d)===false){return}c=(b.users.voteCount==1&&!b.checked)||b.users.voteCount>1;if(c&&!confirm(OW.getLanguageText("questions","option_not_empty_delete_warning"))){return false}e=this.data.displayedCount;b.node.fadeTo(100,0,function(){b.node.slideUp("fast",function(){var g,f=(a.data.optionTotal-a.data.displayedCount)>0;b.node.remove();e--;g=Math.round((a.data.st.displayedCount*50)/100);if(f&&(e<=(g<2?2:g))){a.loadMore(a.data.st.displayedCount-g)}})});this.ajax({command:"removeOption",opt:d,newOption:b.newOption});delete this.options["opt_"+d];this.afterRemove(d,b.newOption)};this.initViewMore=function(){var a=this;this.$(".qa-view-more").click(function(){var b=a.data.optionTotal-a.data.displayedCount;if(b>3){if(a.fbMode){a.openQuestion()}else{return true}}else{a.loadMore()}return false})};this.loadMore=function(d,f){var a=this,b=this.$(".qa-view-more"),e=this.data.offset,c;d=d||false;b.addClass("ow_preloader");c=b.find(".qa-vm-content").hide();this.ajax({command:"more",offset:e,inc:d},function(){b.removeClass("ow_preloader");c.show();a.updateViewMore(true);if(f){f.apply(this)}})};this.openQuestion=function(b){b=b||false;var a=this;this.questionFloatBox=QUESTIONS.openQuestion({userContext:this.data.userContext,questionId:this.data.questionId,relationUniqId:this.uniqId,focusToPost:b,url:this.data.url});this.questionFloatBox.bind("close",function(){a.questionFloatBox=false})};this.openQuestionDelegate=function(a){if(this.fbMode){this.openQuestion(a);return false}return true};this.initAddNew=function(){var d,f,c,e,a,b=this;c=this.$(".qaa-form");f=this.$(".qaa-input");e=this.$(".qaa-button");d=this.$(".questions-add-answer");e.unbind("mouseover.owtip");e.unbind("mouseout.owtip");e.bind("mouseover.owtip",function(){var g={hideEvent:"mouseout",side:"right",show:$(this).attr("q-title")};OW.showTip($(this),g)});e.bind("mouseout.owtip",function(){$(this).data("owTipHide",true)});a=f.val();e.click(function(){c.submit()});f.keyup(function(){if(!this.value){$(this).data("upperCased",false)}if(!$(this).data("upperCased")&&this.value){this.value=this.value.charAt(0).toUpperCase()+this.value.slice(1);$(this).data("upperCased",true)}});f.focus(function(){if(this.value==a){this.value="";$(this).removeClass("invitation")}});f.blur(function(){if(!this.value){this.value=a;$(this).addClass("invitation")}});c.submit(function(){var g=$.trim(f.val()),h;b.$(".questions-answer").each(function(){if($.trim($(".qa-text",this).text())==g){b.hlOption($(this).attr("rel"));h=true;return false}});if(h){f.val("");return false}if(g&&g!=a){b.ajax({command:"addAnswer",text:g},function(){d.removeClass("ow_preloader").addClass("ow_ic_add");f.val("");f.attr("disabled",false)});f.attr("disabled","disabled");d.removeClass("ow_ic_add").addClass("ow_preloader")}return false})};this.hlOption=function(a){var b=this.$(".qa-list");b.css("min-height",b.height());b.append(this.getOption(a).node);b.css("min-height","auto")};this.bindOption=function(f,d){var l=this,h,b,g,e={};d=d||false;h=$(f);b=h.find(".qa-check input");g=$(".qa-result",h);if(!g.width()){g.hide()}e.id=h.attr("rel");e.node=h;e.result=g;e.check=b;e.content=h.find(".qa-content");var j=e.content.find(".qa-hover-c"),i=e.content.find(".qa-content-clip"),a=e.content.find(".qa-content-wrap"),c=0;e.content.hover(function(){if(!c){c=a.width();a.width(c)}i.width(c-j.width())},function(){i.width("100%")});e.remove=h.find(".qa-delete-option");e.remove.click(function(){l.removeOption(e.id);return false});if(!d){var k=function(){l.answer(this.value);l.calculate()};b.change(k);e.content.click(function(){var n=b.get(0),m;m=b.is(":radio")?true:!n.checked;if(m!=n.checked){n.checked=m;k.apply(n)}})}return e};this.getOption=function(a){return this.options["opt_"+a]};this.$=function(a){return $(a,this.node)};this.setResponder=function(a){this.rsp=a};this.ajax=function(c,d){var a=null;if(this.isBusy()){return false}var b=function(){this.ajaxSuccess.apply(this,arguments);if(d){d.apply(this,arguments)}};this.beforeAjax();if(this.relation){a={uniqId:this.relation.uniqId,data:this.relation.data}}this.startCommand();$.ajax({type:"POST",url:this.rsp,data:{data:JSON.stringify(this.data),query:JSON.stringify(c),relation:JSON.stringify(a)},context:this,success:b,dataType:"json",complete:function(){this.endCommand()}})};this.ajaxSuccess=function(b){var a=this;this.inProgress=false;if(b.listing&&window.QUESTIONS_ListObject){window.QUESTIONS_ListObject.ajaxSuccess(b.listing)}if(b.relation&&this.relation){this.relation.ajaxSuccess(b.relation)}if(b.status){this.refreshStatus(b.status.posts,b.status.votes,b.status.follows)}if(b.message){OW.info(b.message)}if(b.error){OW.error(b.error)}if(b.warning){OW.warning(b.warning)}if(b.reload){this.redraw(b.reload);return}if(b.data){this.data=b.data;this.updateViewMore(true)}if(b.options){this.addOptionList(b.options)}if(b.unvote){this.showUnvote()}if(b.call){if(typeof b.call==="string"&&$.isFunction(a[b.call])){a[b.call].apply(a)}if($.isPlainObject(b.call)&&$.isFunction(a[b.call.name])){a[b.call.name].apply(a,b.call.args||[])}if($.isArray(b.call)){$.each(b.call,function(c,d){if(typeof a[d.name]==="function"){a[d.name].apply(a,d.args||[])}})}}};this.updateViewMore=function(c){var a=this.data.optionTotal-this.data.displayedCount,b=this.$(".qa-view-more");c=c||false;b.find(".qa-vm-count").text(a);if(a>0){if(!c){b.show()}b.removeClass("qvm-empty")}if(a<=0){if(!c){b.hide()}b.addClass("qvm-empty")}};this.beforeAjax=function(){};this.answer=function(a){var b={yes:[],no:[]};$.each(this.options,function(c,e){var d=e.check.get(0).checked;if(d!=e.checked){b[d?"yes":"no"].push(e.id);e.users[d?"add":"remove"]();e.checked=d}});this.ajax({command:"answer",answers:b,optionId:a})};this.getVoteCount=function(c){var e,d,a,b;e=this.getOption(c).node;d=this.getOption(c).check;a=this.getOption(c).result;b=parseInt(a.attr("rel"))+(d[0].checked?1:0);b-=parseInt(d.attr("rel"));return b};this.addOption=function(c,d,b){var e,a;a=this.$(".questions-answer[rel="+d.id+"]");if(a.length){a.replaceWith(c)}else{b=b||this.$(".qa-list");b.append(c)}e=this.bindOption(c);e.users=new QUESTIONS_UserList(e.node.find(".qa-users .qa-avatar"),d.users,d.voteCount,this.userId,d.id);e.checked=d.checked;e.newOption=d.newOption;this.options["opt_"+e.id]=e;this.afterOptionAdd(e)};this.afterOptionAdd=function(){this.controlRemoveBtns()};this.addOptionList=function(b){var a=this,d;if(b.length===1){a.addOption($(b[0].markup)[0],b[0].data);a.actionComplete();return}d=$('<div class="qa-option-animate-c"></div>').hide();this.$(".qa-list").append(d);$.each(b,function(e,c){a.addOption($(c.markup)[0],c.data,d)});if(b.length>5){d.after(d.children()).remove()}else{d.slideDown(100,function(){d.after(d.children()).remove();a.actionComplete()})}};this.actionComplete=function(){if(this.data.optionTotal-this.data.displayedCount<=0){this.$(".questions-add-answer").show()}this.updateViewMore()};this.deleteOption=function(a){var b=this.options["opt_"+a];b.node.remove();delete this.options["opt_"+a]};this.animate=function(c,b,d){var a;a=$(".qa-result",c);$(".qa-vote-n",c).text(b);if(d>0){a.show()}else{a.hide()}if(d>=100){a.addClass("q-result-full")}else{a.removeClass("q-result-full")}$(".qa-result",c).css({width:d+"%"})};this.setBehavior=function(a){$.extend(this,a)}};QUESTIONS_PollAnswers=function(){var a=this;this.calculate=function(){var b=this.totalAnswers;this.$(".qa-check input").each(function(){var c=a.getOption(this.value);b+=this.checked?1:0;b-=parseInt($(this).attr("rel"))});this.$(".questions-answer").each(function(){var c,d;c=a.getVoteCount($(this).attr("rel"));d=b?(c*100/b):0;a.animate(this,c,d)})};this.controlRemoveBtns=function(){var b=this.$(".questions-answer");if(this.data.optionTotal<=3){b.find(".qa-delete-option").hide()}else{b.find(".qa-delete-option").show()}}};QUESTIONS_PollAnswers.prototype=new QUESTIONS_AnswersProto();QUESTIONS_QuestionAnswers=function(){var a=this;this.calculate=function(){var c=this,b=0;this.$(".questions-answer").each(function(){var d=c.getVoteCount($(this).attr("rel"));b=b>d?b:d});this.$(".questions-answer").each(function(){var d,e;d=c.getVoteCount($(this).attr("rel"));e=b?(d*100/b):0;c.animate(this,d,e)})}};QUESTIONS_QuestionAnswers.prototype=new QUESTIONS_AnswersProto();QUESTIONS_Tabs=function(d){this.node=document.getElementById(d);var a=this.$(".gtabs-tab"),c=this.$(".gtabs-contents"),b=this;a.click(function(){var e=$(this),f,g;a.removeClass("gtabs-active");e.addClass("gtabs-active");f=e.data("key");c.hide();g=c.filter("[data-key="+f+"]").show();OW.trigger("questions.tabs_changed",[{newTab:g}],b)})};QUESTIONS_Tabs.prototype={$:function(a){return $(a,this.node)}};QUESTIONS_QuestionAdd=function(g,i,e){var a=owForms[i],c=a.elements.question,d=a.elements.answers,h=a.elements.allowAddOprions,b=document.getElementById(g);a.bind("submit",function(){$(".Q_StatusPreloader",b).show()});a.bind("success",function(){$(".Q_StatusPreloader",b).hide()});function f(j){$(".questions-add .questions-input",b).keyup(function(){if(!this.value){$(this).data("upperCased",false)}if(!$(this).data("upperCased")&&this.value){this.value=this.value.charAt(0).toUpperCase()+this.value.slice(1);$(this).data("upperCased",true)}})}$(c.input).focus(function(){var j=$(this).unbind().autoResize({extraSpace:0});f(j)});c.validate=function(){var j=c.getValue();j=$.trim(j);if(!j){QUESTIONS_Feedback.error(OW.getLanguageText("questions","feedback_question_empty"),c.input);throw"SubmitError"}if(j.length<e.minQuestionLength){QUESTIONS_Feedback.error(OW.getLanguageText("questions","feedback_question_min_length"),c.input);throw"SubmitError"}if(j.length>e.maxQuestionLength){QUESTIONS_Feedback.error(OW.getLanguageText("questions","feedback_question_max_length"),c.input);throw"SubmitError"}};d.form=a;d.maxAnswerLength=e.maxAnswerLength;d.onValidate=function(){if(!h.input.checked&&d.getValue().length<2){this.showError(OW.getLanguageText("questions","feedback_question_two_apt_required"),$(h.input));throw"SubmitError"}};$(".questions-add-answers-btn",b).click(function(){$(".questions-add-answers",b).show();$(this).hide();$(".questions-add-answers-options",b).show()});OW.bind("questions.after_question_add",function(j){$(".questions-add-answers",b).slideUp("fast");$(".questions-add-answers-options",b).hide();$(".questions-add-answers-btn",b).show()})};QUESTIONS_AnswersField=function(f,c,a){this.form=null;this.invMsg=a;this.maxAnswerLength=150;OwFormElement.call(this,f,c);var b=this;this.delegates={onLastFocus:function(){b.addItem()},onFocus:function(){if(this.value==a){this.value="";$(this).removeClass("invitation")}},onKeyUp:function(){if(this.value!=a){if(!this.value){$(this).data("upperCased",false)}if(!$(this).data("upperCased")&&this.value){this.value=this.value.charAt(0).toUpperCase()+this.value.slice(1);$(this).data("upperCased",true)}}},onBlur:function(){if(!this.value){this.value=a;$(this).addClass("invitation")}}};function d(g){g.unbind("focus").bind("focus",b.delegates.onFocus);g.unbind("blur").bind("blur",b.delegates.onBlur);g.unbind("keyup").bind("keyup",b.delegates.onKeyUp)}function e(g){g.unbind("focus.add_new").bind("focus.add_new",b.delegates.onLastFocus)}d($(".mt-item-input",this.input));e($(".mt-item-input:last",this.input));this.getValue=function(){var g=this,h=[];this.removeErrors();$(".mt-item-input",this.input).each(function(j,l){var k=$(l).val();if(k&&g.invMsg!=k){h.push(k)}});return h};this.setValue=function(g){$(".mt-item-input",this.input).each(function(h,j){$(j).val(g[h-1]||"")})};this.resetValue=function(){var g=this;this.removeErrors();$(".mt-added-item",this.input).remove();$(".mt-item-input",this.input).each(function(h,j){j.value="";g.delegates.onBlur.call(j)});e($(".mt-item-input:last",this.input))};this.addItem=function(){$(".mt-item-input").unbind("focus.add_new");var g=$(".mt-item:eq(0)",this.input).clone().show();g.addClass("mt-added-item");g.appendTo(this.input);d(g.find(".mt-item-input"));e(g.find(".mt-item-input"))};this.validate=function(){var g={};$(".mt-item",this.input).removeClass("mt-incorrect-option").each(function(h,k){var l=$(".mt-item-input",k);var j=l.val();if(j&&b.invMsg!=j){if(j.length>b.maxAnswerLength){b.showError(OW.getLanguageText("questions","feedback_option_max_length"),l);throw"SubmitError"}if(g[j]){$(k).addClass("mt-incorrect-option");l.one("keydown.incorrect",function(){$(k).removeClass("mt-incorrect-option")});l.get(0).focus();b.showError(OW.getLanguageText("questions","feedback_question_dublicate_option"),l);throw"SubmitError"}else{g[j]=true}}});this.onValidate(this)};this.onValidate=function(){};this.removeErrors=function(){QUESTIONS_Feedback.removeErrors()};this.showError=function(h,g){QUESTIONS_Feedback.error(h,g)}};QUESTIONS_AnswersField.prototype=OwFormElement.prototype;QUESTIONS_Feedback={};QUESTIONS_Feedback.errors=[];QUESTIONS_Feedback.error=function(c,a){a=$(a);if(a.data("owTip")){a.data("owTip").find(".ow_tip_box").html(c)}var b={side:"left",show:c,width:150};OW.showTip(a,b);QUESTIONS_Feedback.errors.push(a);window.setTimeout(function(){OW.hideTip(a)},8000)};QUESTIONS_Feedback.removeErrors=function(){for(var a=0;a<QUESTIONS_Feedback.errors.length;a++){OW.hideTip(QUESTIONS_Feedback.errors.pop())}};QUESTIONS=new (function(){this.openQuestion=function(c){c.focusToPost=c.focusToPost||false;if(c.relationId&&!c.relationUniqId&&QUESTIONS_RelationCollection[c.relationId]){c.relationUniqId=QUESTIONS_RelationCollection[c.relationId]}var b,a;if(c.url&&window.history.replaceState){a=window.location.href;window.history.pushState({},"",c.url)}b=OW.ajaxFloatBox("QUESTIONS_CMP_Question",[c.questionId,c.userContext,null,{relation:c.relationUniqId,focusToPost:c.focusToPost,loadStatic:false,inPopup:true}],{width:550,top:50,iconClass:"ow_ic_lens"});b.bind("close",function(){if(a){window.history.pushState({},"",a)}});return b};this.showQuestionFollowers=function(a,c,b){QUESTIONS_UserList.floatBox=OW.ajaxFloatBox("QUESTIONS_CMP_FollowList",[a,c,b],{width:450,iconClass:"ow_ic_user",title:OW.getLanguageText("questions","followers_fb_title")});if(QUESTIONS_UserList.floatBox.$preloader){QUESTIONS_UserList.floatBox.$preloader.addClass("q-floatbox-preloader")}QUESTIONS_UserList.floatBox.bind("close",function(){QUESTIONS_UserList.floatBox=false})}})();QUESTIONS.friendMode=false;(function(b){b.fn.autoResize=function(c){var a=b.extend({onResize:function(){},animate:true,animateDuration:150,animateCallback:function(){},extraSpace:20,limit:1000},c);this.filter("textarea").each(function(){var l=b(this).css({resize:"none","overflow-y":"hidden"}),d=l.height(),j=(function(){var f=["height","width","lineHeight","textDecoration","letterSpacing"],g={};b.each(f,function(k,i){g[i]=l.css(i)});return l.clone().removeAttr("id").removeAttr("name").css({position:"absolute",top:0,left:-9999}).css(g).attr("tabIndex","-1").insertBefore(l)})(),e=null,h=function(){j.height(0).val(b(this).val()).scrollTop(10000);var g=Math.max(j.scrollTop(),d)+a.extraSpace,f=b(this).add(j);if(e===g){return}e=g;if(g>=a.limit){b(this).css("overflow-y","");return}a.onResize.call(this);a.animate&&l.css("display")==="block"?f.stop().animate({height:g},a.animateDuration,a.animateCallback):f.height(g)};l.unbind(".dynSiz").bind("keyup.dynSiz",h).bind("keydown.dynSiz",h).bind("change.dynSiz",h)});return this}})(jQuery);window.QUESTIONS_Loaded=true}window.EQAjaxLoadCallbacksRun=function(){if(window.ATTPAjaxLoadCallbackQueue){$.each(window.ATTPAjaxLoadCallbackQueue,function(a,b){b.call()})}};